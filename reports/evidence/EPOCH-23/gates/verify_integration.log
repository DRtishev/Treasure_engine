
> treasure-engine@1.0.0 verify:integration
> node scripts/verify/master_integration_e2e.mjs


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  EPOCH-16: MASTER INTEGRATION TEST                       â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”â”â” COMPONENT INITIALIZATION â”â”â”

[LiveAdapterDryRun] Loaded 3 fixtures
  Adapter: LiveAdapterDryRun
âœ“ Create LiveAdapterDryRun
âœ“ Create ReconciliationEngine
  Log path: logs/test_integration/run_master_integration_test.jsonl
âœ“ Create EventLogV2
  Run ID: master_integration_test
  Seed: 1989247062
âœ“ Create RunContext (deterministic)
  Components integrated:
    âœ“ ExecutionAdapter
    âœ“ RunContext
    âœ“ EventLog
    âœ“ ReconciliationEngine
âœ“ Create MasterExecutor

â”â”â” EXECUTION TEST 1: SUCCESSFUL FLOW â”â”â”

  Order ID: master_integration_test_HACK_MASTER_01_test_0_0
  Success: true
  Fills: 1
âœ“ Execute BTC/USDT market buy intent
  âœ“ Execution successful
âœ“ Verify execution success
  âœ“ Order ID valid
âœ“ Verify order placed
  Fill price: 50010
  Fill qty: 0.001
  Fill fee: 0.05001
âœ“ Verify fills present
  âœ“ Reconciliation PASS
  Mismatches: 0
âœ“ Verify reconciliation ran
  Latency breakdown:
    Order: 0ms
    Fill: 0ms
    Reconciliation: 0ms
    Total: 0ms
  â„¹  Note: 0ms latency in deterministic mode (clock frozen)
âœ“ Verify performance metrics

â”â”â” EXECUTION TEST 2: PARTIAL FILL â”â”â”

  Order ID: master_integration_test_HACK_MASTER_02_test_1_0
  Success: true
âœ“ Execute ETH/USDT limit sell intent
  âœ“ Partial fill handled correctly
âœ“ Verify partial fill handling

â”â”â” EVENT LOG VERIFICATION â”â”â”

  âœ“ Event log flushed
âœ“ Flush event log
  Events logged: 11
  âœ“ All expected event types present
âœ“ Verify events logged
  Categories: SYS, EXEC, RECON
âœ“ Verify event categories
  âœ“ Sequences: 0..10
âœ“ Verify monotonic sequences

â”â”â” MASTER EXECUTOR STATISTICS â”â”â”

  Intents created: 2
  Orders placed: 2
  Orders filled: 1
  Reconciliations run: 2
  Reconciliation failures: 0
  Events logged: 11
  Avg latency: 0.00ms
âœ“ Get MasterExecutor statistics

â”â”â” INTEGRATION REPORT â”â”â”

  Report generated
  Executions: 2
  Success rate: 100%
  Avg latency: 0.00ms
âœ“ Generate integration report

â”â”â” CLEANUP â”â”â”

  âœ“ MasterExecutor closed
âœ“ Close MasterExecutor

â”â”â” SUMMARY â”â”â”

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
RESULTS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
âœ“ PASSED: 20
âœ— FAILED: 0
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ‰ MASTER INTEGRATION TEST: PASS

âœ… INTEGRATION VERIFIED:

   âœ“ MasterExecutor operational
   âœ“ Full flow: Intent â†’ Order â†’ Fill â†’ Reconcile â†’ Event
   âœ“ All components integrated (Adapter, Context, EventLog, Reconciliation)
   âœ“ Performance metrics tracked
   âœ“ Event logging working
   âœ“ Statistics accurate

ğŸ“¦ ARTIFACTS PRODUCED:

   â€¢ reports/integration_report.json

