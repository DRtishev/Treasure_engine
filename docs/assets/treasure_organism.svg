<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 760 420" width="760" height="420" font-family="monospace,sans-serif">
  <!-- Background -->
  <rect width="760" height="420" rx="10" fill="#0d1117"/>

  <!-- Title -->
  <text x="380" y="30" text-anchor="middle" fill="#e6edf3" font-size="14" font-weight="bold">TREASURE ENGINE — Operator Loop (CERT mode)</text>

  <!-- verify:fast -->
  <rect x="30" y="55" width="130" height="48" rx="6" fill="#21262d" stroke="#388bfd" stroke-width="1.5"/>
  <text x="95" y="75" text-anchor="middle" fill="#79c0ff" font-size="11" font-weight="bold">verify:fast</text>
  <text x="95" y="91" text-anchor="middle" fill="#8b949e" font-size="9">ACQ_LOCK01 → bootstrap</text>
  <text x="95" y="102" text-anchor="middle" fill="#3fb950" font-size="9">PASS → proceed</text>

  <!-- Arrow fast → eventbus -->
  <line x1="160" y1="79" x2="210" y2="79" stroke="#388bfd" stroke-width="1.5" marker-end="url(#arr)"/>

  <!-- EventBus -->
  <rect x="210" y="55" width="130" height="48" rx="6" fill="#21262d" stroke="#388bfd" stroke-width="1.5"/>
  <text x="275" y="75" text-anchor="middle" fill="#79c0ff" font-size="11" font-weight="bold">EventBus:smoke</text>
  <text x="275" y="91" text-anchor="middle" fill="#8b949e" font-size="9">event schema v1</text>
  <text x="275" y="102" text-anchor="middle" fill="#8b949e" font-size="9">deterministic tick</text>

  <!-- Arrow eventbus → timemachine -->
  <line x1="340" y1="79" x2="390" y2="79" stroke="#388bfd" stroke-width="1.5" marker-end="url(#arr)"/>

  <!-- TimeMachine -->
  <rect x="390" y="55" width="130" height="48" rx="6" fill="#21262d" stroke="#388bfd" stroke-width="1.5"/>
  <text x="455" y="75" text-anchor="middle" fill="#79c0ff" font-size="11" font-weight="bold">TimeMachine</text>
  <text x="455" y="91" text-anchor="middle" fill="#8b949e" font-size="9">ledger heartbeat</text>
  <text x="455" y="102" text-anchor="middle" fill="#8b949e" font-size="9">8 ticks, offline</text>

  <!-- Arrow timemachine → autopilot -->
  <line x1="520" y1="79" x2="570" y2="79" stroke="#388bfd" stroke-width="1.5" marker-end="url(#arr)"/>

  <!-- Autopilot -->
  <rect x="570" y="55" width="130" height="48" rx="6" fill="#21262d" stroke="#d2a8ff" stroke-width="1.5"/>
  <text x="635" y="75" text-anchor="middle" fill="#d2a8ff" font-size="11" font-weight="bold">Autopilot</text>
  <text x="635" y="91" text-anchor="middle" fill="#8b949e" font-size="9">dry-run default</text>
  <text x="635" y="102" text-anchor="middle" fill="#8b949e" font-size="9">--apply double-key</text>

  <!-- Arrow autopilot → cockpit -->
  <line x1="635" y1="103" x2="635" y2="143" stroke="#d2a8ff" stroke-width="1.5" marker-end="url(#arr)"/>

  <!-- Cockpit -->
  <rect x="570" y="143" width="130" height="48" rx="6" fill="#21262d" stroke="#d2a8ff" stroke-width="1.5"/>
  <text x="635" y="163" text-anchor="middle" fill="#d2a8ff" font-size="11" font-weight="bold">Cockpit</text>
  <text x="635" y="179" text-anchor="middle" fill="#8b949e" font-size="9">HUD: TruthLevel</text>
  <text x="635" y="190" text-anchor="middle" fill="#8b949e" font-size="9">readiness + pr01</text>

  <!-- Arrow cockpit → candidates -->
  <line x1="570" y1="167" x2="520" y2="167" stroke="#d2a8ff" stroke-width="1.5" marker-end="url(#arr)"/>

  <!-- Candidates -->
  <rect x="390" y="143" width="130" height="48" rx="6" fill="#21262d" stroke="#3fb950" stroke-width="1.5"/>
  <text x="455" y="163" text-anchor="middle" fill="#56d364" font-size="11" font-weight="bold">Candidates</text>
  <text x="455" y="179" text-anchor="middle" fill="#8b949e" font-size="9">signal selection</text>
  <text x="455" y="190" text-anchor="middle" fill="#8b949e" font-size="9">paper / micro-live</text>

  <!-- ops:life wrapper box -->
  <rect x="15" y="40" width="730" height="175" rx="8" fill="none" stroke="#30363d" stroke-width="1" stroke-dasharray="5,4"/>
  <text x="20" y="55" fill="#30363d" font-size="10">ops:life — S01..S06</text>

  <!-- BLOCKED path -->
  <rect x="30" y="250" width="200" height="48" rx="6" fill="#161b22" stroke="#f85149" stroke-width="1.5"/>
  <text x="130" y="270" text-anchor="middle" fill="#f85149" font-size="11" font-weight="bold">BLOCKED: ACQ_LOCK01</text>
  <text x="130" y="286" text-anchor="middle" fill="#8b949e" font-size="9">node toolchain missing/wrong</text>
  <text x="130" y="297" text-anchor="middle" fill="#8b949e" font-size="9">NETV01 forbidden here</text>

  <!-- Arrow fast → blocked -->
  <line x1="95" y1="103" x2="95" y2="250" stroke="#f85149" stroke-width="1" stroke-dasharray="4,3"/>
  <text x="100" y="190" fill="#f85149" font-size="9">EC=2</text>

  <!-- Bootstrap box -->
  <rect x="270" y="250" width="200" height="48" rx="6" fill="#161b22" stroke="#e3b341" stroke-width="1.5"/>
  <text x="370" y="270" text-anchor="middle" fill="#e3b341" font-size="11" font-weight="bold">ops:node:toolchain:bootstrap</text>
  <text x="370" y="286" text-anchor="middle" fill="#8b949e" font-size="9">unlock → acquire → lock</text>
  <text x="370" y="297" text-anchor="middle" fill="#8b949e" font-size="9">double-key: flag + ALLOW_NETWORK</text>

  <!-- Arrow blocked → bootstrap -->
  <line x1="230" y1="274" x2="270" y2="274" stroke="#e3b341" stroke-width="1.5" marker-end="url(#arr2)"/>

  <!-- Arrow bootstrap → verify:fast loop -->
  <path d="M 370 298 Q 370 360 95 360 Q 95 320 95 103" fill="none" stroke="#3fb950" stroke-width="1.5" stroke-dasharray="5,3" marker-end="url(#arr3)"/>
  <text x="240" y="375" fill="#3fb950" font-size="9" text-anchor="middle">bootstrap once → verify:fast PASS → ops:life green</text>

  <!-- CERT refusal note -->
  <rect x="510" y="250" width="220" height="48" rx="6" fill="#161b22" stroke="#388bfd" stroke-width="1"/>
  <text x="620" y="270" text-anchor="middle" fill="#79c0ff" font-size="10" font-weight="bold">CERT anti-sabotage</text>
  <text x="620" y="284" text-anchor="middle" fill="#8b949e" font-size="9">ALLOW_NETWORK must be absent</text>
  <text x="620" y="298" text-anchor="middle" fill="#8b949e" font-size="9">TREASURE_NET_KILL=1 enforced</text>

  <!-- Arrowhead markers -->
  <defs>
    <marker id="arr" markerWidth="8" markerHeight="8" refX="6" refY="3" orient="auto">
      <path d="M0,0 L0,6 L8,3 z" fill="#388bfd"/>
    </marker>
    <marker id="arr2" markerWidth="8" markerHeight="8" refX="6" refY="3" orient="auto">
      <path d="M0,0 L0,6 L8,3 z" fill="#e3b341"/>
    </marker>
    <marker id="arr3" markerWidth="8" markerHeight="8" refX="6" refY="3" orient="auto">
      <path d="M0,0 L0,6 L8,3 z" fill="#3fb950"/>
    </marker>
  </defs>
</svg>
