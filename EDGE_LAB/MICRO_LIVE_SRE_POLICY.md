# MICRO_LIVE_SRE_POLICY.md — Micro-Live SRE Court Policy

epoch: MICRO_LIVE_SRE_COURT_V1
version: 1.0.0
last_updated: 2026-02-21

## Purpose

Defines the SRE gate requirements that must pass before MICRO_LIVE_ELIGIBLE can
be declared. This court generates three sub-gate files consumed by
edge_micro_live_readiness.mjs: proxy_guard.json, paper_court.json, sli_baseline.json.

All values are offline-deterministic (seeded PRNG, no live data dependency).

---

## Reason Codes

| Code | Name | Exit |
|------|------|------|
| M001 | POLICY_FILES_MISSING | NEEDS_DATA (exit 0) |
| M002 | SRE_FILES_MISSING | NEEDS_DATA (exit 0) |
| M003 | PROXY_VALIDATION_INCOMPLETE | BLOCKED (exit 1) |
| M004 | PAPER_COURT_DRIFT | BLOCKED (exit 1) |
| M005 | SLI_BASELINE_FAILED | BLOCKED (exit 1) |
| NONE | PASS | exit 0 |

---

## 1. Gate: Policy Files

REQUIRED files (NEEDS_DATA if missing):
- EDGE_LAB/MICRO_LIVE_SRE_POLICY.md (this file)
- EDGE_LAB/INCIDENT_PLAYBOOK.md

---

## 2. Gate: SRE Files

REQUIRED files (NEEDS_DATA if missing):
- EDGE_LAB/SLO_SLI.md
- EDGE_LAB/ERROR_BUDGET_POLICY.md

---

## 3. Gate: Proxy Guard

Scans EDGE_LAB/HACK_REGISTRY.md for proxy language (`estimated`, `approx`, `proxy`).
If any detected, EDGE_LAB/PROXY_VALIDATION.md must exist with STATUS: PASS and
must reference all detected triggers.

| Condition | Result |
|-----------|--------|
| No proxy language detected | PASS |
| Proxy detected + PROXY_VALIDATION.md PASS + all triggers covered | PASS |
| Proxy detected + no validation file | BLOCKED (M003) |
| Proxy detected + validation incomplete | BLOCKED (M003) |

Output: gates/manual/proxy_guard.json (status: PASS/BLOCKED)

---

## 4. Gate: Paper Court (Execution Drift)

Deterministic simulation of 200 synthetic orders using XorShift32 seed=65.
Thresholds per EXECUTION_REALITY_POLICY.md:

| Metric | Threshold | Verdict if exceeded |
|--------|-----------|-------------------|
| slippage_model_error | <= 0.30 | BLOCKED (M004) |
| fill_rate | >= 0.99 | BLOCKED (M004) |
| reject_rate | <= 0.005 | BLOCKED (M004) |
| latency_p95_ms | <= 500 | BLOCKED (M004) |

Output: gates/manual/paper_court.json (status: PASS/BLOCKED)

---

## 5. Gate: SLI Baseline

Derived from paper court simulation. Captures latency, fill rate, reject rate,
and slippage drift as baseline SLI values for SLO compliance tracking.

| Metric | SLO Threshold | Source |
|--------|--------------|--------|
| fill_rate | >= 0.99 | paper court simulation |
| reject_rate | <= 0.005 | paper court simulation |
| latency_p95_ms | <= 500 | paper court simulation |
| slippage_drift | <= 0.30 | paper court simulation |
| data_freshness_max_ms | <= 5000 | PROXY: declared |
| missed_bars | 0 | PROXY: declared |

Output: gates/manual/sli_baseline.json (status: PASS/BLOCKED)

---

## 6. PASS Conditions

| Condition | Verdict |
|-----------|---------|
| All 5 gates PASS | PASS — writes micro_live_sre.json status=PASS |
| Any gate BLOCKED | BLOCKED — writes micro_live_sre.json status=BLOCKED |
| Policy/SRE files missing | NEEDS_DATA — writes micro_live_sre.json status=NEEDS_DATA |

---

## 7. MCL Notes

FRAME: Are SRE prerequisites for micro-live trading satisfied offline?
RISKS: Paper court simulation is deterministic-only; real fills may differ.
CONTRACT: edge_micro_live_sre.mjs reads this file, generates sub-gates.
MIN-DIFF: Sub-gates (proxy_guard, paper_court, sli_baseline) are the same
          as generated by edge_next_epoch.mjs — moved earlier in the pipeline
          so edge_micro_live_readiness.mjs has them available.
PROOF: Run npm run edge:micro:live:sre; expect STATUS=PASS.
