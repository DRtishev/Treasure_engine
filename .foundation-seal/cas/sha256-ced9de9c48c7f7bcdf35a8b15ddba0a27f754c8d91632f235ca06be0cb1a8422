# RUNBOOK RU
## ONE COMMAND GOLD
```bash
CI=true npm run verify:phoenix:x2
```
Операторский режим x2 теперь автоматизирован: создаются 2 изолированных `TREASURE_RUN_DIR`, выполняются два прогона и генерируется machine-report `reports/evidence/EPOCH-66/gates/manual/phoenix_x2_report.json`.
## Обязательный baseline
```bash
npm ci
CI=true npm run verify:repo
CI=true npm run verify:specs
CI=true npm run verify:docs
CI=true npm run verify:ledger
CI=true npm run verify:edge
CI=true npm run verify:treasure
CI=true npm run verify:phoenix
```
Каждый required gate — два запуска подряд.
## Cache mode (детерминированный, опциональный)
- Включение: `PHOENIX_CACHE=1`.
- Cache действует для heavy stages (`freeze/sweep/phoenix`), ключ включает stage + SSOT/script hashes + env subset + node/npm.
- Cache хранит только machine summary, не canonical evidence.
- Политика: `npm run verify:cache:policy`.
## Provenance / attestation
- Сборка: `npm run truth:provenance` (`truth/PROVENANCE.json`).
- Проверка: `npm run verify:provenance`.
- В x2-режиме выполняется нормализованное сравнение run1/run2.
## Kill-criteria behavior
- Критические gates: `verify:phoenix`, `verify:ledger`, `verify:release`, `verify:baseline`.
- При 2 подряд FAIL в цикле цепочка останавливается.
- Генерируется диагностический report + mini evidence pack `EPOCH-KILL-<stamp>/`.
## Commit binding evidence
- Финализация: `node scripts/evidence/finalize_commit_binding.mjs`.
- Разрешить автофикс только с `FINALIZE_EVIDENCE=1`.
- Проверка: `npm run verify:evidence:commit_binding`.
- В `verify:phoenix` — warn-only, в `verify:release` при strict — blocking.
## Релизный baseline
```bash
npm run release:build
RELEASE_BUILD=1 RELEASE_STRICT=1 CI=true npm run verify:release
```
Строгую проверку релиза запускать дважды.
## Политика отказа
- Любой FAIL = BLOCKED.
- Нет evidence-файлов = BLOCKED.
- Любая недетерминированность в ACTIVE runtime = BLOCKED.
